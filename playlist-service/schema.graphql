# Custom scalar type for handling dates in ISO format (e.g., "2024-02-20T12:34:56.789Z")
scalar DateTime

type Playlist {
  # Unique identifier generated by MongoDB
  id: ID!

  # Name of the playlist (2-100 characters)
  name: String!

  # Username of the playlist owner
  ownerName: String!

  # Array of movie titles (must contain at least 1 valid string)
  movieNames: [String!]!

  # Optional playlist description (max 500 characters)
  description: String

  # Automatically set when playlist is created (server-generated)
  createdAt: DateTime!

  # Automatically updated on changes (server-maintained)
  updatedAt: DateTime!
}

type Query {
  # Fetch all playlists, sorted by creation date (newest first)
  playlists: [Playlist!]!

  # Get a single playlist by ID (returns null if not found)
  playlist(id: ID!): Playlist

  # Search playlists by name or description (case-insensitive)
  searchPlaylists(query: String!): [Playlist!]!
}

type Mutation {
  # Create a new playlist (all fields except description are required)
  addPlaylist(
    name: String!
    ownerName: String!
    movieNames: [String!]!
    description: String
  ): Playlist!

  # Update existing playlist (only provided fields will be changed)
  updatePlaylist(
    id: ID!
    name: String
    ownerName: String
    movieNames: [String!]
    description: String
  ): Playlist!

  # Delete a playlist (returns true if successful)
  deletePlaylist(id: ID!): Boolean!
}
